[gd_scene load_steps=15 format=3 uid="uid://kuvenhtg24sj"]

[ext_resource type="Texture2D" uid="uid://vc6aa6mcucn" path="res://Assets/spacebg.png" id="1_ebmjs"]
[ext_resource type="Texture2D" uid="uid://d0e17mjqlc1jk" path="res://Assets/brackeys_platformer_assets/sprites/world_tileset.png" id="2_qxrlw"]
[ext_resource type="PackedScene" uid="uid://d2e1jja3wsgji" path="res://Scenes/player.tscn" id="4_wowpa"]
[ext_resource type="PackedScene" uid="uid://b2300l8uixo1u" path="res://Scenes/KillZone.tscn" id="5_i6g32"]
[ext_resource type="PackedScene" uid="uid://50l4v2ioptrn" path="res://Scenes/Platform.tscn" id="5_wowpa"]
[ext_resource type="Script" uid="uid://ceojjbrj4l8eg" path="res://Scripts/CaveEntranceDarken.cs" id="6_i6g32"]
[ext_resource type="Shader" uid="uid://bjcap3lw43d86" path="res://Scenes/game.gdshader" id="7_1l0tm"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_wrm1d"]
texture = ExtResource("2_qxrlw")
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0
6:0/0 = 0
6:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
7:0/0 = 0
7:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
8:0/0 = 0
9:0/0 = 0
10:0/0 = 0
11:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0
5:1/0 = 0
6:1/0 = 0
6:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
7:1/0 = 0
7:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
8:1/0 = 0
9:1/0 = 0
10:1/0 = 0
11:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
4:2/0 = 0
5:2/0 = 0
6:2/0 = 0
7:2/0 = 0
8:2/0 = 0
9:2/0 = 0
10:2/0 = 0
11:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
5:3/0 = 0
6:3/0 = 0
7:3/0 = 0
8:3/0 = 0
9:3/0 = 0
0:4/0 = 0
1:4/0 = 0
5:4/0 = 0
6:4/0 = 0
7:4/0 = 0
8:4/0 = 0
9:4/0 = 0
0:5/0 = 0
1:5/0 = 0
5:5/0 = 0
6:5/0 = 0
7:5/0 = 0
8:5/0 = 0
1:6/0 = 0
5:6/0 = 0
6:6/0 = 0
7:6/0 = 0
8:6/0 = 0
0:7/0 = 0
1:7/0 = 0
3:7/0 = 0
5:7/0 = 0
6:7/0 = 0
7:7/0 = 0
8:7/0 = 0
0:8/0 = 0
1:8/0 = 0
2:8/0 = 0
3:8/0 = 0
4:8/0 = 0
5:8/0 = 0
6:8/0 = 0
7:8/0 = 0
8:8/0 = 0
0:9/0 = 0
1:9/0 = 0
2:9/0 = 0
3:9/0 = 0
4:9/0 = 0
5:9/0 = 0
6:9/0 = 0
7:9/0 = 0
0:10/0 = 0
1:10/0 = 0
2:10/0 = 0
3:10/0 = 0
4:10/0 = 0
6:10/0 = 0
0:11/0 = 0
1:11/0 = 0
2:11/0 = 0
3:11/0 = 0
4:11/0 = 0
5:11/0 = 0
0:12/0 = 0
1:12/0 = 0
2:12/0 = 0
3:12/0 = 0
4:12/0 = 0
0:13/0 = 0
1:13/0 = 0
2:13/0 = 0
3:13/0 = 0
4:13/0 = 0
5:13/0 = 0
0:14/0 = 0
1:14/0 = 0
2:14/0 = 0
3:14/0 = 0
4:14/0 = 0
0:15/0 = 0
1:15/0 = 0
2:15/0 = 0
3:15/0 = 0
2:4/0 = 0
3:4/0 = 0
4:4/0 = 0
4:5/0 = 0
3:5/0 = 0
2:5/0 = 0
2:6/0 = 0
3:6/0 = 0
4:6/0 = 0
4:7/0 = 0
2:7/0 = 0

[sub_resource type="TileSet" id="TileSet_wrm1d"]
physics_layer_0/collision_layer = 1
physics_layer_0/collision_mask = 2
sources/0 = SubResource("TileSetAtlasSource_wrm1d")

[sub_resource type="Animation" id="Animation_i6g32"]
length = 5.0
loop_mode = 2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(383, -17), Vector2(819, -18)]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 5),
"transitions": PackedFloat32Array(1, 1),
"values": [{
"args": [],
"method": &"FlipSprite"
}, {
"args": [],
"method": &"FlipSprite"
}]
}

[sub_resource type="Animation" id="Animation_wowpa"]
resource_name = "platform move"
length = 2.0
loop_mode = 2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(383, -17), Vector2(546, -18)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_1l0tm"]
_data = {
&"RESET": SubResource("Animation_i6g32"),
&"platform move": SubResource("Animation_wowpa")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1l0tm"]
size = Vector2(430, 94)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_v158k"]
shader = ExtResource("7_1l0tm")

[node name="Game" type="Node2D"]

[node name="TileMap" type="TileMap" parent="."]
position = Vector2(6, 0)
tile_set = SubResource("TileSet_wrm1d")
format = 2
layer_0/name = "Cavebg"
layer_0/z_index = 3
layer_0/tile_data = PackedInt32Array(-327582, 393216, 2, -393116, 393216, 2, -327578, 393216, 2, -327577, 393216, 2, -393110, 524288, 1, -393118, 524288, 1, -393117, 524288, 1, -327581, 524288, 1, -262045, 524288, 1, -262046, 524288, 1, -262044, 524288, 1, -327580, 524288, 1, -262043, 524288, 1, -327579, 524288, 1, -393115, 524288, 1, -393114, 524288, 1, -393113, 524288, 1, -393112, 524288, 1, -327576, 524288, 1, -262040, 524288, 1, -262041, 524288, 1, -262042, 524288, 1, -262039, 524288, 1, -327575, 524288, 1, -327574, 524288, 1, -393111, 393216, 2, -262038, 524288, 1, -327573, 524288, 1, -393109, 524288, 1, -262037, 524288, 1, -196512, 458752, 0, -196511, 458752, 0, -196510, 458752, 0, -196509, 458752, 0, -196508, 458752, 0, -196507, 458752, 0, -196506, 458752, 0, -196505, 458752, 0, -196504, 458752, 0, -196503, 458752, 0, -196502, 458752, 0, -196501, 458752, 0, -262036, 524288, 1, -327572, 524288, 1, -393108, 524288, 1, -393107, 524288, 1, -327571, 524288, 1, -262035, 524288, 1, -327570, 524288, 1, -262034, 524288, 1, -327569, 524288, 1, -262033, 524288, 1, -327568, 524288, 1, -262032, 524288, 1, -262031, 524288, 1, -262030, 524288, 1, -196495, 524288, 1, -196494, 524288, 1, -196493, 524288, 1, -196500, 458752, 0, -196499, 458752, 0, -130962, 458752, 0, -130961, 458752, 0, -130960, 458752, 0, -65423, 458752, 0, -65422, 458752, 0, 115, 458752, 0, 116, 458752, 0, 117, 458752, 0, 118, 458752, 0, 119, 458752, 0, 120, 458752, 0, 121, 458752, 0, 122, 458752, 0, 123, 458752, 0, 124, 458752, 0, -196498, 524288, 1, -196497, 524288, 1, -196496, 524288, 1, -130959, 524288, 0, -130958, 524288, 0, -130957, 524288, 0, 114, 458752, 0, -65421, 524288, 0, -196492, 524288, 0, -130956, 524288, 0, -65420, 524288, 0, -196491, 524288, 0, -130955, 524288, 0, -65419, 524288, 0, -196490, 524288, 0, -130954, 524288, 0, -65418, 524288, 0, -130953, 524288, 0, -65417, 524288, 0, -196489, 524288, 0, -196488, 524288, 0, -130952, 524288, 0, -65416, 524288, 0, -196487, 524288, 0, -130951, 524288, 0, -65415, 524288, 0, -130950, 524288, 0, -65414, 524288, 0, -196485, 524288, 0, -130949, 524288, 0, -196484, 524288, 0, -130948, 524288, 0, -65412, 524288, 0, -65413, 524288, 0, -196486, 524288, 0, -458641, 327680, 7, -327564, 327680, 7)
layer_1/name = "Map"
layer_1/tile_data = PackedInt32Array(0, 393216, 0, 1, 393216, 0, 2, 393216, 0, 3, 393216, 0, 4, 393216, 0, 5, 393216, 0, 6, 393216, 0, 7, 393216, 0, 8, 393216, 0, 9, 393216, 0, -65526, 393216, 0, -65525, 393216, 0, -65524, 393216, 0, -65523, 393216, 0, -65522, 393216, 0, -131057, 393216, 0, -131056, 393216, 0, -131055, 393216, 0, -131054, 393216, 0, -131053, 393216, 0, -131052, 393216, 0, 65536, 393216, 1, 131072, 524288, 1, 131073, 524288, 1, 131074, 393216, 1, 131075, 393216, 1, 131076, 393216, 1, 131077, 393216, 1, 131078, 393216, 1, 131079, 393216, 1, 131080, 393216, 1, 131081, 524288, 1, 131082, 524288, 1, 131083, 524288, 1, 131084, 393216, 1, 131085, 393216, 1, 131086, 393216, 1, 131087, 393216, 1, 131088, 524288, 1, 131089, 393216, 1, 65553, 393216, 1, 65554, 393216, 1, 65555, 393216, 1, 19, 393216, 1, -65516, 524288, 1, 20, 393216, 1, 65556, 393216, 1, 131092, 524288, 1, 131091, 393216, 1, 131090, 393216, 1, -65517, 393216, 1, -65518, 524288, 1, -65519, 393216, 1, -65520, 393216, 1, -65521, 393216, 1, 17, 524288, 1, 18, 393216, 1, 16, 393216, 1, 15, 393216, 1, 14, 393216, 1, 13, 393216, 1, 12, 524288, 1, 11, 524288, 1, 10, 393216, 1, 65552, 393216, 1, 65551, 393216, 1, 65550, 393216, 1, 65549, 393216, 1, 65548, 393216, 1, 65547, 393216, 1, 65546, 393216, 1, 65545, 393216, 1, 65544, 524288, 1, 65543, 524288, 1, 65542, 524288, 1, 65541, 393216, 1, 65540, 393216, 1, 65539, 393216, 1, 65538, 393216, 1, 65537, 393216, 1, -131018, 458752, 1, -131017, 458752, 1, -131016, 458752, 1, -131015, 458752, 1, -131014, 458752, 1, -131013, 458752, 1, -65476, 458752, 1, -65474, 458752, 1, -65475, 458752, 1, -65472, 458752, 1, -65473, 458752, 1, -65470, 458752, 1, -65471, 458752, 1, -65469, 458752, 1, -65468, 458752, 1, -65482, 393216, 1, -65481, 393216, 1, -65480, 393216, 1, -65479, 393216, 1, -65478, 393216, 1, -65477, 393216, 1, 54, 393216, 1, 55, 393216, 1, 56, 393216, 1, 57, 393216, 1, 58, 393216, 1, 59, 393216, 1, 60, 393216, 1, 61, 393216, 1, 62, 393216, 1, 63, 393216, 1, 68, 393216, 1, 67, 393216, 1, 64, 393216, 1, 65, 393216, 1, 66, 393216, 1, -65467, 458752, 1, -65466, 458752, 1, -65463, 458752, 1, -130998, 458752, 1, -130997, 458752, 1, -130996, 458752, 1, -130995, 458752, 1, -130994, 458752, 1, -130993, 458752, 1, -130992, 458752, 1, -130991, 458752, 1, -196527, 458752, 1, -196526, 458752, 1, -65464, 458752, 1, 69, 393216, 1, 70, 393216, 1, 72, 393216, 1, 73, 393216, 1, 74, 524288, 0, 75, 393216, 1, -65461, 393216, 1, -65462, 393216, 1, -65460, 524288, 0, -65459, 393216, 1, -65458, 393216, 1, -65457, 393216, 1, -65456, 393216, 1, -65455, 524288, 0, -130990, 393216, 1, -65454, 393216, 1, 82, 393216, 1, 81, 393216, 1, 80, 524288, 0, 79, 393216, 1, 78, 393216, 1, 77, 393216, 1, 76, 393216, 1, 65590, 393216, 1, 65591, 393216, 1, 65592, 393216, 1, 65593, 393216, 1, 65594, 393216, 1, 65595, 393216, 1, 65596, 393216, 1, 65597, 393216, 1, 65598, 393216, 1, 65599, 393216, 1, 65600, 393216, 1, 65601, 393216, 1, 65602, 393216, 1, 65603, 393216, 1, 65604, 393216, 1, 65605, 393216, 1, 65606, 393216, 1, 65608, 393216, 1, 65609, 393216, 1, 65610, 393216, 1, 65611, 393216, 1, 65612, 393216, 1, 65613, 393216, 1, 65614, 393216, 1, 65615, 393216, 1, 65616, 393216, 1, 65617, 393216, 1, 65618, 393216, 1, -196525, 458752, 1, -196524, 458752, 1, -196523, 458752, 1, -196522, 458752, 1, -196520, 458752, 1, -196519, 458752, 1, -196518, 458752, 1, -196521, 458752, 1, -196517, 458752, 1, -196516, 458752, 1, -196515, 458752, 1, -196514, 458752, 1, -262052, 524288, 3, -393131, 327680, 3, -327595, 327680, 4, -262059, 327680, 5, -262077, 327680, 3, -196541, 327680, 4, -131005, 327680, 5, -327604, 327680, 3, -262068, 327680, 4, -196532, 327680, 5, -327623, 327680, 3, -262087, 327680, 4, -196551, 327680, 5, -131011, 327680, 6, -196530, 327680, 6, -130999, 327680, 7, -262061, 327680, 7, -262048, 524288, 1, -130989, 393216, 1, -65453, 524288, 0, 83, 393216, 1, 65619, 393216, 1, 65620, 393216, 1, 65621, 524288, 0, 65622, 393216, 1, 86, 393216, 1, 85, 393216, 1, -65451, 524288, 0, 84, 393216, 1, -65452, 393216, 1, -130988, 393216, 1, -130987, 393216, 1, -130986, 393216, 1, -65450, 393216, 1, -130985, 393216, 1, -65449, 393216, 1, 87, 393216, 1, -65448, 393216, 1, 88, 393216, 1, 65623, 393216, 1, 65624, 393216, 1, 89, 524288, 0, -65447, 393216, 1, 65625, 393216, 1, 65626, 393216, 1, 90, 393216, 1, 91, 524288, 0, 65627, 393216, 1, 92, 393216, 1, 93, 393216, 1, 65628, 393216, 1, 65629, 393216, 1, 65630, 393216, 1, 94, 393216, 1, -65442, 393216, 1, -65443, 524288, 0, -65444, 393216, 1, -65445, 393216, 1, -65446, 393216, 1, -130982, 393216, 1, -130981, 393216, 1, -130980, 393216, 1, -130979, 393216, 1, -130978, 393216, 1, -130983, 393216, 1, -130984, 524288, 0, -196513, 458752, 1, -393119, 458752, 1, -458654, 458752, 1, -458653, 458752, 1, -458652, 458752, 1, -458651, 458752, 1, -458650, 458752, 1, -655261, 327680, 3, -589725, 327680, 4, -524189, 327680, 5, -524188, 327680, 7, -524190, 327680, 7, -458655, 327680, 8, -524184, 327680, 6, -524186, 327680, 5, -589722, 327680, 3, -524182, 327680, 5, -589718, 327680, 4, -655254, 327680, 4, -720790, 327680, 4, -786326, 327680, 4, -851862, 327680, 3, -327584, 524288, 0, -458645, 458752, 1, -458646, 458752, 1, -458647, 458752, 1, -458648, 458752, 1, -458649, 458752, 1, -327583, 524288, 1, -262047, 524288, 1, -130977, 393216, 1, -130976, 393216, 1, -130975, 393216, 1, -130974, 393216, 1, -130973, 393216, 1, -130972, 393216, 1, -130971, 393216, 1, -130970, 393216, 1, -130969, 393216, 1, -130968, 393216, 1, -130967, 393216, 1, -130966, 393216, 1, -130965, 393216, 1, -65429, 393216, 1, 106, 393216, 1, 105, 393216, 1, 104, 393216, 1, 103, 393216, 1, 102, 393216, 1, 101, 393216, 1, 100, 393216, 1, 99, 393216, 1, 98, 393216, 1, 97, 393216, 1, 96, 393216, 1, -65440, 393216, 1, -65441, 393216, 1, -65439, 393216, 1, -65438, 393216, 1, -65437, 393216, 1, -65436, 393216, 1, -65435, 393216, 1, -65434, 393216, 1, -65433, 393216, 1, -65432, 393216, 1, -65431, 393216, 1, -65430, 393216, 1, 107, 393216, 1, 65642, 393216, 1, 65641, 393216, 1, 65640, 393216, 1, 65639, 393216, 1, 65638, 393216, 1, 65637, 393216, 1, 65636, 393216, 1, 65635, 393216, 1, 65634, 393216, 1, 65633, 393216, 1, 65632, 393216, 1, 65631, 393216, 1, 95, 393216, 1, 65643, 393216, 1, -458644, 458752, 1, -458643, 458752, 1, -393106, 458752, 1, -393105, 458752, 1, -393104, 458752, 1, -327567, 458752, 1, -327566, 458752, 1, -262029, 458752, 1, -262028, 458752, 1, -262027, 458752, 1, -262026, 458752, 1, -262025, 458752, 1, -262024, 458752, 1, -262023, 458752, 1, -262022, 458752, 1, -262021, 458752, 1, -262020, 458752, 1, 108, 393216, 1, 109, 393216, 1, 110, 393216, 1, 111, 393216, 1, 113, 393216, 1, 65644, 393216, 1, 65645, 393216, 1, 65646, 393216, 1, 65647, 393216, 1, 65648, 393216, 1, 65649, 393216, 1, 65650, 393216, 1, 65651, 393216, 1, 65652, 393216, 1, 65653, 393216, 1, 65654, 393216, 1, 65655, 393216, 1, 65656, 393216, 1, 65657, 393216, 1, 65658, 393216, 1, 65659, 393216, 1, 131195, 393216, 1, 65660, 393216, 1, 131196, 393216, 1, 131194, 393216, 1, 131193, 393216, 1, 131192, 393216, 1, 131191, 393216, 1, 131190, 393216, 1, 131189, 393216, 1, 131188, 393216, 1, 131187, 393216, 1, 131186, 393216, 1, 131185, 393216, 1, 131184, 393216, 1, 131183, 393216, 1, 131182, 393216, 1, 131181, 393216, 1, 131180, 393216, 1, 196717, 393216, 1, 196718, 393216, 1, 196719, 393216, 1, 196720, 393216, 1, 196721, 393216, 1, 196722, 393216, 1, 196723, 393216, 1, 196724, 393216, 1, 196725, 393216, 1, 196726, 393216, 1, 196727, 393216, 1, 196728, 393216, 1, 196729, 393216, 1, 196730, 393216, 1, 196731, 393216, 1, 196732, 393216, 1, 196716, 393216, 1, -65428, 393216, 1, -65427, 393216, 1, -65426, 393216, 1, -65425, 393216, 1, -65424, 393216, 1, 112, 393216, 1, -130964, 393216, 1, -130963, 393216, 1, -196483, 458752, 1, -130947, 524288, 0, -65411, 524288, 0, 125, 458752, 1, 126, 458752, 1, 127, 458752, 1, 128, 458752, 1, 129, 458752, 1, 130, 458752, 1, 131, 458752, 1, 132, 458752, 1, 133, 458752, 1, 134, 458752, 1)

[node name="CharacterBody2D" parent="." instance=ExtResource("4_wowpa")]
position = Vector2(29, -10)
collision_layer = 2

[node name="Camera2D" type="Camera2D" parent="CharacterBody2D"]
zoom = Vector2(3, 3)
position_smoothing_enabled = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="CharacterBody2D"]

[node name="Moving platform" parent="." instance=ExtResource("5_wowpa")]
position = Vector2(383, -17)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Moving platform"]
libraries = {
&"": SubResource("AnimationLibrary_1l0tm")
}
autoplay = "RESET"

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2(0.5, 0.5)
motion_mirroring = Vector2(1200, 1200)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer"]
z_index = -1
position = Vector2(496, 79)
texture = ExtResource("1_ebmjs")

[node name="KillZone" parent="." instance=ExtResource("5_i6g32")]
position = Vector2(11, 300)
collision_mask = 2

[node name="CaveEntranceDarken" type="Area2D" parent="."]
position = Vector2(1572, -63)
collision_mask = 2
script = ExtResource("6_i6g32")

[node name="CollisionShape2D" type="CollisionShape2D" parent="CaveEntranceDarken"]
position = Vector2(210, 19)
shape = SubResource("RectangleShape2D_1l0tm")

[node name="ColorRect" type="ColorRect" parent="CaveEntranceDarken"]
visible = false
offset_left = -1676.0
offset_top = -458.0
offset_right = 724.0
offset_bottom = 1942.0
color = Color(0, 0, 0, 0.85098)

[node name="ColorRect2" type="ColorRect" parent="CaveEntranceDarken"]
modulate = Color(0, 0, 0, 1)
self_modulate = Color(0, 0, 0, 1)
z_index = 7
texture_filter = 1
material = SubResource("ShaderMaterial_v158k")
offset_left = 2.0
offset_top = -33.0
offset_right = 194.0
offset_bottom = 31.0
color = Color(0, 0, 0, 0.878)

[connection signal="body_entered" from="CaveEntranceDarken" to="CaveEntranceDarken" method="OnBodyEntered"]
[connection signal="body_exited" from="CaveEntranceDarken" to="CaveEntranceDarken" method="_on_body_exited"]
